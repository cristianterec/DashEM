<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedLingo - Emergency Medicine Learning Platform</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
        }
        
        .header {
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 24px;
            font-weight: 700;
            color: #4ade80;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #4ade80, #22c55e);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .user-stats {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            font-weight: 500;
        }
        
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .welcome-section {
            text-align: center;
            margin-bottom: 60px;
        }
        
        .welcome-title {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #4ade80, #22c55e, #16a34a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .welcome-subtitle {
            font-size: 20px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 32px;
        }
        
        .progress-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 60px;
        }
        
        .progress-card {
            padding: 24px;
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .progress-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .progress-number {
            font-size: 32px;
            font-weight: 700;
            color: #4ade80;
            margin-bottom: 8px;
        }
        
        .progress-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 24px;
            margin-bottom: 60px;
        }
        
        .category-card {
            padding: 32px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .category-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
        }
        
        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4ade80, #22c55e);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .category-card:hover::before {
            opacity: 1;
        }
        
        .category-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .category-icon {
            width: 60px;
            height: 60px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            background: linear-gradient(135deg, rgba(74, 222, 128, 0.2), rgba(34, 197, 94, 0.2));
            border: 1px solid rgba(74, 222, 128, 0.3);
        }
        
        .category-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .category-subtitle {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .category-progress {
            margin-bottom: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #22c55e);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .progress-text {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .category-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 24px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: 600;
            color: #4ade80;
        }
        
        .stat-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .start-button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #4ade80, #22c55e);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(74, 222, 128, 0.4);
        }
        
        .quiz-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .quiz-container {
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 40px;
        }
        
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }
        
        .quiz-progress {
            flex: 1;
            margin: 0 20px;
        }
        
        .quiz-progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            overflow: hidden;
        }
        
        .quiz-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ade80, #22c55e);
            border-radius: 6px;
            transition: width 0.5s ease;
        }
        
        .close-button {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }
        
        .close-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .question-container {
            margin-bottom: 32px;
        }
        
        .question-text {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 24px;
            line-height: 1.4;
        }
        
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 32px;
        }
        
        .option-button {
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }
        
        .option-button:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(74, 222, 128, 0.5);
        }
        
        .option-button.selected {
            background: rgba(74, 222, 128, 0.2);
            border-color: #4ade80;
        }
        
        .option-button.correct {
            background: rgba(34, 197, 94, 0.3);
            border-color: #22c55e;
        }
        
        .option-button.incorrect {
            background: rgba(239, 68, 68, 0.3);
            border-color: #ef4444;
        }
        
        .submit-button {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #4ade80, #22c55e);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.5;
            pointer-events: none;
        }
        
        .submit-button.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        .submit-button:hover.active {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(74, 222, 128, 0.4);
        }
        
        .explanation {
            margin-top: 20px;
            padding: 20px;
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            display: none;
        }
        
        .explanation-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #60a5fa;
        }
        
        @media (max-width: 768px) {
            .header {
                padding: 16px 20px;
            }
            
            .welcome-title {
                font-size: 36px;
            }
            
            .categories-grid {
                grid-template-columns: 1fr;
            }
            
            .progress-overview {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .quiz-container {
                padding: 24px;
            }
            
            .question-text {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <header class="header glass">
        <div class="logo">
            <div class="logo-icon">🏥</div>
            <span>MedLingo</span>
        </div>
        <div class="user-stats">
            <div class="stat-item">
                <span>🔥</span>
                <span id="streak">7</span>
            </div>
            <div class="stat-item">
                <span>💎</span>
                <span id="gems">1,247</span>
            </div>
            <div class="stat-item">
                <span>❤️</span>
                <span id="hearts">5</span>
            </div>
        </div>
    </header>

    <div class="main-container">
        <div class="welcome-section">
            <h1 class="welcome-title">Emergency Medicine Mastery</h1>
            <p class="welcome-subtitle">Master critical emergency medicine concepts through interactive learning</p>
        </div>

        <div class="progress-overview">
            <div class="progress-card glass">
                <div class="progress-number">73%</div>
                <div class="progress-label">Overall Progress</div>
            </div>
            <div class="progress-card glass">
                <div class="progress-number">156</div>
                <div class="progress-label">Lessons Completed</div>
            </div>
            <div class="progress-card glass">
                <div class="progress-number">2,341</div>
                <div class="progress-label">XP Earned</div>
            </div>
            <div class="progress-card glass">
                <div class="progress-number">12</div>
                <div class="progress-label">Certificates</div>
            </div>
        </div>

        <div class="categories-grid">
            <div class="category-card glass" onclick="openQuiz('respiratory')">
                <div class="category-header">
                    <div class="category-icon">🫁</div>
                    <div>
                        <div class="category-title">Respiratory</div>
                        <div class="category-subtitle">Airway & Breathing Emergencies</div>
                    </div>
                </div>
                <div class="category-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 85%"></div>
                    </div>
                    <div class="progress-text">17/20 lessons completed</div>
                </div>
                <div class="category-stats">
                    <div class="stat">
                        <div class="stat-value">340</div>
                        <div class="stat-label">XP</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">92%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">4.2</div>
                        <div class="stat-label">Avg Time</div>
                    </div>
                </div>
                <button class="start-button">Continue Learning</button>
            </div>

            <div class="category-card glass" onclick="openQuiz('cardiovascular')">
                <div class="category-header">
                    <div class="category-icon">❤️</div>
                    <div>
                        <div class="category-title">Cardiovascular</div>
                        <div class="category-subtitle">Cardiac Emergencies & Arrhythmias</div>
                    </div>
                </div>
                <div class="category-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 60%"></div>
                    </div>
                    <div class="progress-text">12/20 lessons completed</div>
                </div>
                <div class="category-stats">
                    <div class="stat">
                        <div class="stat-value">240</div>
                        <div class="stat-label">XP</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">88%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">3.8</div>
                        <div class="stat-label">Avg Time</div>
                    </div>
                </div>
                <button class="start-button">Continue Learning</button>
            </div>

            <div class="category-card glass" onclick="openQuiz('trauma')">
                <div class="category-header">
                    <div class="category-icon">🩹</div>
                    <div>
                        <div class="category-title">Trauma</div>
                        <div class="category-subtitle">Injury Assessment & Management</div>
                    </div>
                </div>
                <div class="category-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%"></div>
                    </div>
                    <div class="progress-text">15/20 lessons completed</div>
                </div>
                <div class="category-stats">
                    <div class="stat">
                        <div class="stat-value">300</div>
                        <div class="stat-label">XP</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">94%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">4.1</div>
                        <div class="stat-label">Avg Time</div>
                    </div>
                </div>
                <button class="start-button">Continue Learning</button>
            </div>

            <div class="category-card glass" onclick="openQuiz('neurological')">
                <div class="category-header">
                    <div class="category-icon">🧠</div>
                    <div>
                        <div class="category-title">Neurological</div>
                        <div class="category-subtitle">CNS & Neurological Emergencies</div>
                    </div>
                </div>
                <div class="category-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 45%"></div>
                    </div>
                    <div class="progress-text">9/20 lessons completed</div>
                </div>
                <div class="category-stats">
                    <div class="stat">
                        <div class="stat-value">180</div>
                        <div class="stat-label">XP</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">86%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">New</div>
                    </div>
                </div>
                <button class="start-button">Start Learning</button>
            </div>

            <div class="category-card glass" onclick="openQuiz('gastrointestinal')">
                <div class="category-header">
                    <div class="category-icon">🫃</div>
                    <div>
                        <div class="category-title">Gastrointestinal</div>
                        <div class="category-subtitle">GI Emergencies & Disorders</div>
                    </div>
                </div>
                <div class="category-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 30%"></div>
                    </div>
                    <div class="progress-text">6/20 lessons completed</div>
                </div>
                <div class="category-stats">
                    <div class="stat">
                        <div class="stat-value">120</div>
                        <div class="stat-label">XP</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">90%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">New</div>
                    </div>
                </div>
                <button class="start-button">Start Learning</button>
            </div>

            <div class="category-card glass" onclick="openQuiz('resuscitation')">
                <div class="category-header">
                    <div class="category-icon">⚡</div>
                    <div>
                        <div class="category-title">Resuscitation</div>
                        <div class="category-subtitle">CPR, ACLS & Emergency Protocols</div>
                    </div>
                </div>
                <div class="category-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 90%"></div>
                    </div>
                    <div class="progress-text">18/20 lessons completed</div>
                </div>
                <div class="category-stats">
                    <div class="stat">
                        <div class="stat-value">360</div>
                        <div class="stat-label">XP</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">96%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">3.5</div>
                        <div class="stat-label">Avg Time</div>
                    </div>
                </div>
                <button class="start-button">Continue Learning</button>
            </div>

            <div class="category-card glass" onclick="openQuiz('endocrine')">
                <div class="category-header">
                    <div class="category-icon">🧪</div>
                    <div>
                        <div class="category-title">Endocrine & Metabolic</div>
                        <div class="category-subtitle">Diabetes, Thyroid & Metabolic Crises</div>
                    </div>
                </div>
                <div class="category-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 55%"></div>
                    </div>
                    <div class="progress-text">11/20 lessons completed</div>
                </div>
                <div class="category-stats">
                    <div class="stat">
                        <div class="stat-value">220</div>
                        <div class="stat-label">XP</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">89%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">4.0</div>
                        <div class="stat-label">Avg Time</div>
                    </div>
                </div>
                <button class="start-button">Continue Learning</button>
            </div>

            <div class="category-card glass" onclick="openQuiz('psychiatric')">
                <div class="category-header">
                    <div class="category-icon">🧘</div>
                    <div>
                        <div class="category-title">Psychiatric</div>
                        <div class="category-subtitle">Mental Health Emergencies</div>
                    </div>
                </div>
                <div class="category-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 25%"></div>
                    </div>
                    <div class="progress-text">5/20 lessons completed</div>
                </div>
                <div class="category-stats">
                    <div class="stat">
                        <div class="stat-value">100</div>
                        <div class="stat-label">XP</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">85%</div>
                        <div class="stat-label">Accuracy</div>
                    </div>
                    <div class="stat">
                        <div class="stat-label">New</div>
                    </div>
                </div>
                <button class="start-button">Start Learning</button>
            </div>
        </div>
    </div>

    <!-- Quiz Modal -->
    <div class="quiz-modal" id="quizModal">
        <div class="quiz-container glass">
            <div class="quiz-header">
                <button class="close-button" onclick="closeQuiz()">✕</button>
                <div class="quiz-progress">
                    <div class="quiz-progress-bar">
                        <div class="quiz-progress-fill" id="quizProgressFill"></div>
                    </div>
                </div>
                <div style="color: rgba(255,255,255,0.7);">
                    <span id="currentQuestion">1</span>/<span id="totalQuestions">5</span>
                </div>
            </div>
            
            <div class="question-container">
                <div class="question-text" id="questionText"></div>
                <div class="options-container" id="optionsContainer"></div>
                <button class="submit-button" id="submitButton" onclick="submitAnswer()">Check Answer</button>
                <div class="explanation" id="explanation">
                    <div class="explanation-title">Explanation:</div>
                    <div id="explanationText"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Quiz data for different categories
        const quizData = {
            respiratory: [
                {
                    question: "A 45-year-old patient presents with acute dyspnea, chest pain, and hemoptysis. What is the most likely diagnosis?",
                    options: [
                        "Pneumonia",
                        "Pulmonary embolism",
                        "Pneumothorax",
                        "Asthma exacerbation"
                    ],
                    correct: 1,
                    explanation: "The classic triad of dyspnea, chest pain, and hemoptysis strongly suggests pulmonary embolism. While other conditions can cause dyspnea and chest pain, hemoptysis in this context is most characteristic of PE."
                },
                {
                    question: "What is the first-line treatment for severe asthma exacerbation in the ED?",
                    options: [
                        "Oral corticosteroids",
                        "Nebulized albuterol and ipratropium",
                        "IV magnesium sulfate",
                        "Intubation"
                    ],
                    correct: 1,
                    explanation: "Nebulized bronchodilators (albuterol and ipratropium) are the first-line treatment for acute asthma exacerbation, providing rapid bronchodilation."
                },
                {
                    question: "A patient has a tension pneumothorax. What is the immediate life-saving intervention?",
                    options: [
                        "Chest X-ray",
                        "Needle decompression",
                        "Chest tube insertion",
                        "High-flow oxygen"
                    ],
                    correct: 1,
                    explanation: "Tension pneumothorax is a life-threatening emergency requiring immediate needle decompression at the 2nd intercostal space, midclavicular line, followed by chest tube insertion."
                },
                {
                    question: "What oxygen saturation target is appropriate for COPD patients?",
                    options: [
                        "95-100%",
                        "88-92%",
                        "85-88%",
                        "80-85%"
                    ],
                    correct: 1,
                    explanation: "COPD patients should target 88-92% oxygen saturation to avoid CO2 retention and respiratory depression from loss of hypoxic drive."
                },
                {
                    question: "Which finding on chest X-ray is pathognomonic for pneumothorax?",
                    options: [
                        "Pleural effusion",
                        "Visceral pleural line",
                        "Consolidation",
                        "Hyperinflation"
                    ],
                    correct: 1,
                    explanation: "The visceral pleural line - a thin line representing the edge of the collapsed lung - is the pathognomonic finding for pneumothorax on chest X-ray."
                }
            ],
            cardiovascular: [
                {
                    question: "A patient presents with crushing chest pain radiating to the left arm. ECG shows ST elevation in leads II, III, and aVF. Which coronary artery is most likely occluded?",
                    options: [
                        "Left anterior descending (LAD)",
                        "Right coronary artery (RCA)",
                        "Left circumflex (LCX)",
                        "Left main coronary artery"
                    ],
                    correct: 1,
                    explanation: "ST elevation in leads II, III, and aVF indicates an inferior STEMI, which is typically caused by occlusion of the right coronary artery (RCA)."
                },
                {
                    question: "What is the target door-to-balloon time for STEMI patients?",
                    options: [
                        "60 minutes",
                        "90 minutes",
                        "120 minutes",
                        "180 minutes"
                    ],
                    correct: 1,
                    explanation: "The American Heart Association recommends a door-to-balloon time of ≤90 minutes for STEMI patients to minimize myocardial damage."
                },
                {
                    question: "A patient in atrial fibrillation with RVR has a heart rate of 180 bpm and is hemodynamically unstable. What is the most appropriate immediate treatment?",
                    options: [
                        "Diltiazem IV",
                        "Metoprolol IV",
                        "Synchronized cardioversion",
                        "Amiodarone IV"
                    ],
                    correct: 2,
                    explanation: "Hemodynamically unstable atrial fibrillation with RVR requires immediate synchronized cardioversion to restore normal rhythm and improve cardiac output."
                },
                {
                    question: "What is the first-line medication for stable ventricular tachycardia?",
                    options: [
                        "Lidocaine",
                        "Amiodarone",
                        "Procainamide",
                        "Adenosine"
                    ],
                    correct: 1,
                    explanation: "Amiodarone is the first-line antiarrhythmic for stable ventricular tachycardia, with better efficacy and fewer contraindications than lidocaine."
                },
                {
                    question: "A patient has acute heart failure with pulmonary edema. What is the most appropriate initial diuretic dose?",
                    options: [
                        "Furosemide 20mg IV",
                        "Furosemide 40mg IV",
                        "Furosemide 80mg IV",
                        "Furosemide 160mg IV"
                    ],
                    correct: 2,
                    explanation: "For acute heart failure with pulmonary edema, furosemide 80mg IV is typically the appropriate initial dose, though it should be adjusted based on the patient's usual diuretic dose."
                }
            ],
            trauma: [
                {
                    question: "In the primary survey (ABCDE), what does the 'C' represent?",
                    options: [
                        "Cervical spine",
                        "Circulation with hemorrhage control",
                        "Cardiac monitoring",
                        "Chest examination"
                    ],
                    correct: 1,
                    explanation: "In the ATLS primary survey, 'C' stands for Circulation with hemorrhage control, focusing on identifying and controlling bleeding while assessing perfusion."
                },
                {
                    question: "A patient has a penetrating abdominal wound with evisceration. What is the appropriate management?",
                    options: [
                        "Push organs back into abdomen",
                        "Cover with dry sterile gauze",
                        "Cover with saline-soaked sterile gauze",
                        "Leave exposed to air"
                    ],
                    correct: 2,
                    explanation: "Eviscerated organs should be covered with saline-soaked sterile gauze to prevent desiccation and contamination. Never attempt to push organs back into the abdomen."
                },
                {
                    question: "What is the Glasgow Coma Scale score for a patient who opens eyes to pain, has confused verbal response, and localizes to pain?",
                    options: [
                        "10",
                        "11",
                        "12",
                        "13"
                    ],
                    correct: 2,
                    explanation: "Eyes open to pain (2) + Confused verbal response (4) + Localizes to pain (5) = GCS 11. This indicates moderate traumatic brain injury."
                },
                {
                    question: "A motorcyclist has a suspected pelvic fracture. What is the most appropriate initial stabilization?",
                    options: [
                        "Pelvic binder",
                        "Bed sheet wrapped around pelvis",
                        "External fixation",
                        "Trendelenburg position"
                    ],
                    correct: 0,
                    explanation: "A pelvic binder is the most appropriate initial stabilization for suspected pelvic fractures, providing circumferential compression to reduce bleeding and pain."
                },
                {
                    question: "What is the most common cause of preventable death in trauma patients?",
                    options: [
                        "Airway obstruction",
                        "Tension pneumothorax",
                        "Hemorrhage",
                        "Brain injury"
                    ],
                    correct: 2,
                    explanation: "Hemorrhage is the most common cause of preventable death in trauma patients, emphasizing the importance of rapid identification and control of bleeding."
                }
            ],
            neurological: [
                {
                    question: "A patient presents with sudden onset severe headache described as 'worst headache of my life'. What is the most likely diagnosis?",
                    options: [
                        "Migraine",
                        "Tension headache",
                        "Subarachnoid hemorrhage",
                        "Cluster headache"
                    ],
                    correct: 2,
                    explanation: "Sudden onset severe headache described as 'worst headache of life' is classic for subarachnoid hemorrhage and requires immediate CT head and possible lumbar puncture."
                },
                {
                    question: "What is the time window for IV tPA administration in acute ischemic stroke?",
                    options: [
                        "3 hours",
                        "4.5 hours",
                        "6 hours",
                        "8 hours"
                    ],
                    correct: 1,
                    explanation: "IV tPA can be administered up to 4.5 hours from symptom onset in eligible patients with acute ischemic stroke, though earlier treatment yields better outcomes."
                },
                {
                    question: "A patient has a generalized tonic-clonic seizure lasting 8 minutes. What is the first-line medication?",
                    options: [
                        "Phenytoin",
                        "Lorazepam",
                        "Diazepam",
                        "Levetiracetam"
                    ],
                    correct: 1,
                    explanation: "Lorazepam is the first-line benzodiazepine for status epilepticus, with longer duration of action than diazepam and better CNS penetration."
                },
                {
                    question: "What blood pressure target is appropriate for acute ischemic stroke patients NOT receiving thrombolytics?",
                    options: [
                        "<140/90 mmHg",
                        "<160/100 mmHg",
                        "<180/105 mmHg",
                        "<220/120 mmHg"
                    ],
                    correct: 3,
                    explanation: "For acute ischemic stroke patients not receiving thrombolytics, blood pressure should only be lowered if >220/120 mmHg to maintain cerebral perfusion pressure."
                },
                {
                    question: "A patient has signs of increased intracranial pressure. What is the most appropriate immediate intervention?",
                    options: [
                        "Hyperventilation to PCO2 25-30 mmHg",
                        "Mannitol 1g/kg IV",
                        "Elevate head of bed 30 degrees",
                        "Hypertonic saline"
                    ],
                    correct: 2,
                    explanation: "Elevating the head of bed 30 degrees is the most immediate and safe intervention to reduce ICP by improving venous drainage from the brain."
                }
            ],
            gastrointestinal: [
                {
                    question: "A patient presents with severe epigastric pain radiating to the back, nausea, and vomiting. Lipase is elevated to 800 U/L. What is the most likely diagnosis?",
                    options: [
                        "Peptic ulcer disease",
                        "Acute pancreatitis",
                        "Cholecystitis",
                        "Gastroenteritis"
                    ],
                    correct: 1,
                    explanation: "Severe epigastric pain radiating to the back with elevated lipase >3x normal strongly suggests acute pancreatitis. The pain pattern and enzyme elevation are characteristic."
                },
                {
                    question: "What is the most common cause of upper GI bleeding?",
                    options: [
                        "Esophageal varices",
                        "Peptic ulcer disease",
                        "Mallory-Weiss tear",
                        "Boerhaave syndrome"
                    ],
                    correct: 1,
                    explanation: "Peptic ulcer disease is the most common cause of upper GI bleeding, accounting for approximately 50% of cases in most populations."
                },
                {
                    question: "A patient has right lower quadrant pain, fever, and leukocytosis. Alvarado score is 8. What is the most appropriate next step?",
                    options: [
                        "CT abdomen/pelvis",
                        "Ultrasound",
                        "Surgical consultation",
                        "Discharge with antibiotics"
                    ],
                    correct: 2,
                    explanation: "An Alvarado score of 8 indicates high probability of appendicitis. Surgical consultation should be obtained promptly for likely operative management."
                },
                {
                    question: "What is the most appropriate initial fluid resuscitation for severe acute pancreatitis?",
                    options: [
                        "Normal saline 250-500 mL/hr",
                        "Lactated Ringer's 250-500 mL/hr",
                        "D5W 125 mL/hr",
                        "Albumin 25g IV"
                    ],
                    correct: 1,
                    explanation: "Lactated Ringer's solution at 250-500 mL/hr is preferred for acute pancreatitis as it may reduce systemic inflammation compared to normal saline."
                },
                {
                    question: "A patient has massive hematemesis with hemodynamic instability. What is the most appropriate immediate intervention?",
                    options: [
                        "Proton pump inhibitor IV",
                        "Octreotide infusion",
                        "Two large-bore IV access and fluid resuscitation",
                        "Urgent endoscopy"
                    ],
                    correct: 2,
                    explanation: "Hemodynamically unstable GI bleeding requires immediate vascular access and aggressive fluid resuscitation before any other interventions."
                }
            ],
            resuscitation: [
                {
                    question: "What is the correct compression-to-ventilation ratio for adult CPR with advanced airway?",
                    options: [
                        "30:2",
                        "15:2",
                        "Continuous compressions with 10 breaths/min",
                        "100:10"
                    ],
                    correct: 2,
                    explanation: "With an advanced airway in place, provide continuous chest compressions with 10 breaths per minute (1 breath every 6 seconds) without pausing compressions."
                },
                {
                    question: "What is the initial energy dose for biphasic defibrillation in adults?",
                    options: [
                        "120-200 J",
                        "200 J",
                        "300 J",
                        "360 J"
                    ],
                    correct: 0,
                    explanation: "Initial biphasic defibrillation should use 120-200 J (manufacturer recommended dose). If unknown, use maximum available energy."
                },
                {
                    question: "A patient in cardiac arrest receives epinephrine. When should the next dose be given?",
                    options: [
                        "Every 2-3 minutes",
                        "Every 3-5 minutes",
                        "Every 5-10 minutes",
                        "Only if no response after 10 minutes"
                    ],
                    correct: 1,
                    explanation: "Epinephrine 1mg IV/IO should be given every 3-5 minutes during cardiac arrest resuscitation according to current ACLS guidelines."
                },
                {
                    question: "What is the target end-tidal CO2 during CPR that suggests effective compressions?",
                    options: [
                        ">10 mmHg",
                        ">20 mmHg",
                        ">35 mmHg",
                        ">50 mmHg"
                    ],
                    correct: 0,
                    explanation: "End-tidal CO2 >10 mmHg during CPR suggests adequate circulation from chest compressions. Values <10 mmHg indicate poor compression quality."
                },
                {
                    question: "A patient has return of spontaneous circulation (ROSC) after cardiac arrest. What is the target oxygen saturation?",
                    options: [
                        "88-92%",
                        "94-98%",
                        "98-100%",
                        "100%"
                    ],
                    correct: 1,
                    explanation: "Post-ROSC care targets oxygen saturation of 94-98% to avoid hyperoxemia, which may worsen neurological outcomes through oxidative stress."
                }
            ],
            endocrine: [
                {
                    question: "A diabetic patient presents with blood glucose 450 mg/dL, ketones positive, pH 7.25. What is the most likely diagnosis?",
                    options: [
                        "Diabetic ketoacidosis (DKA)",
                        "Hyperosmolar hyperglycemic state (HHS)",
                        "Hypoglycemia",
                        "Lactic acidosis"
                    ],
                    correct: 0,
                    explanation: "High glucose, positive ketones, and acidosis (pH <7.3) are diagnostic of diabetic ketoacidosis (DKA). HHS typically lacks significant ketosis."
                },
                {
                    question: "What is the initial insulin dosing for DKA treatment?",
                    options: [
                        "0.1 units/kg/hr continuous IV",
                        "0.15 units/kg IV bolus then 0.1 units/kg/hr",
                        "10 units IV bolus then 5 units/hr",
                        "Sliding scale subcutaneous insulin"
                    ],
                    correct: 1,
                    explanation: "Current DKA guidelines recommend 0.15 units/kg IV bolus followed by 0.1 units/kg/hr continuous infusion, or 0.14 units/kg/hr without bolus."
                },
                {
                    question: "A patient has thyroid storm with heart rate 160, fever 104°F, and altered mental status. What is the first-line antithyroid medication?",
                    options: [
                        "Methimazole",
                        "Propylthiouracil (PTU)",
                        "Radioactive iodine",
                        "Levothyroxine"
                    ],
                    correct: 1,
                    explanation: "Propylthiouracil (PTU) is preferred in thyroid storm because it blocks both thyroid hormone synthesis and peripheral conversion of T4 to T3."
                },
                {
                    question: "What is the target blood glucose range during DKA treatment?",
                    options: [
                        "80-120 mg/dL",
                        "150-200 mg/dL",
                        "200-250 mg/dL",
                        "250-300 mg/dL"
                    ],
                    correct: 2,
                    explanation: "Target glucose of 200-250 mg/dL during DKA treatment prevents hypoglycemia while allowing ketoacidosis resolution. Too rapid glucose correction can cause cerebral edema."
                },
                {
                    question: "A patient presents with weakness, nausea, hypotension, and hyperkalemia. Cortisol level is low. What is the most appropriate immediate treatment?",
                    options: [
                        "Oral prednisone",
                        "IV hydrocortisone",
                        "IV dexamethasone",
                        "Fludrocortisone"
                    ],
                    correct: 1,
                    explanation: "Adrenal crisis requires immediate IV hydrocortisone 100mg every 6-8 hours along with aggressive fluid resuscitation and electrolyte management."
                }
            ],
            psychiatric: [
                {
                    question: "A patient presents with agitation, hyperthermia, muscle rigidity, and altered mental status after starting haloperidol. What is the most likely diagnosis?",
                    options: [
                        "Serotonin syndrome",
                        "Neuroleptic malignant syndrome",
                        "Malignant hyperthermia",
                        "Anticholinergic toxicity"
                    ],
                    correct: 1,
                    explanation: "Neuroleptic malignant syndrome (NMS) presents with hyperthermia, muscle rigidity, altered mental status, and autonomic instability after antipsychotic use."
                },
                {
                    question: "What is the antidote for benzodiazepine overdose?",
                    options: [
                        "Naloxone",
                        "Flumazenil",
                        "Physostigmine",
                        "N-acetylcysteine"
                    ],
                    correct: 1,
                    explanation: "Flumazenil is the specific benzodiazepine receptor antagonist used to reverse benzodiazepine overdose, though it should be used cautiously due to seizure risk."
                },
                {
                    question: "A patient has suicidal ideation with a specific plan and means. What is the most appropriate disposition?",
                    options: [
                        "Discharge with outpatient follow-up",
                        "Voluntary psychiatric admission",
                        "Involuntary psychiatric hold",
                        "Crisis counseling and discharge"
                    ],
                    correct: 2,
                    explanation: "Suicidal ideation with specific plan and means indicates high risk requiring involuntary psychiatric hold for safety and further evaluation."
                },
                {
                    question: "What is the first-line medication for acute agitation in the emergency department?",
                    options: [
                        "Haloperidol 5mg IM",
                        "Lorazepam 2mg IM",
                        "Haloperidol 5mg + Lorazepam 2mg IM",
                        "Olanzapine 10mg IM"
                    ],
                    correct: 2,
                    explanation: "Combination haloperidol and lorazepam IM is often first-line for acute agitation, providing both antipsychotic and anxiolytic effects with good safety profile."
                },
                {
                    question: "A patient presents with dilated pupils, hyperthermia, tachycardia, and altered mental status after taking 'Molly'. What is the most likely cause?",
                    options: [
                        "Cocaine intoxication",
                        "MDMA (Ecstasy) intoxication",
                        "Amphetamine intoxication",
                        "LSD intoxication"
                    ],
                    correct: 1,
                    explanation: "'Molly' is street name for MDMA (Ecstasy). The sympathomimetic symptoms with hyperthermia and altered mental status are characteristic of MDMA intoxication."
                }
            ]
        };

        let currentCategory = '';
        let currentQuestionIndex = 0;
        let selectedAnswer = null;
        let score = 0;
        let answered = false;

        function openQuiz(category) {
            currentCategory = category;
            currentQuestionIndex = 0;
            score = 0;
            answered = false;
            document.getElementById('quizModal').style.display = 'flex';
            loadQuestion();
        }

        function closeQuiz() {
            document.getElementById('quizModal').style.display = 'none';
            selectedAnswer = null;
            answered = false;
        }

        function loadQuestion() {
            const questions = quizData[currentCategory];
            const question = questions[currentQuestionIndex];
            
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('totalQuestions').textContent = questions.length;
            
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            document.getElementById('quizProgressFill').style.width = progress + '%';
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-button';
                button.textContent = option;
                button.onclick = () => selectOption(index);
                optionsContainer.appendChild(button);
            });
            
            document.getElementById('submitButton').className = 'submit-button';
            document.getElementById('submitButton').textContent = 'Check Answer';
            document.getElementById('explanation').style.display = 'none';
            selectedAnswer = null;
            answered = false;
        }

        function selectOption(index) {
            if (answered) return;
            
            selectedAnswer = index;
            const options = document.querySelectorAll('.option-button');
            options.forEach((option, i) => {
                option.classList.remove('selected');
                if (i === index) {
                    option.classList.add('selected');
                }
            });
            
            document.getElementById('submitButton').classList.add('active');
        }

        function submitAnswer() {
            if (selectedAnswer === null || answered) return;
            
            const questions = quizData[currentCategory];
            const question = questions[currentQuestionIndex];
            const options = document.querySelectorAll('.option-button');
            
            answered = true;
            
            options.forEach((option, index) => {
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedAnswer && index !== question.correct) {
                    option.classList.add('incorrect');
                }
            });
            
            if (selectedAnswer === question.correct) {
                score++;
            }
            
            document.getElementById('explanationText').textContent = question.explanation;
            document.getElementById('explanation').style.display = 'block';
            
            if (currentQuestionIndex < questions.length - 1) {
                document.getElementById('submitButton').textContent = 'Next Question';
                document.getElementById('submitButton').onclick = nextQuestion;
            } else {
                document.getElementById('submitButton').textContent = 'Finish Quiz';
                document.getElementById('submitButton').onclick = finishQuiz;
            }
        }

        function nextQuestion() {
            currentQuestionIndex++;
            loadQuestion();
            document.getElementById('submitButton').onclick = submitAnswer;
        }

        function finishQuiz() {
            const questions = quizData[currentCategory];
            const percentage = Math.round((score / questions.length) * 100);
            
            alert(`Quiz Complete!\n\nScore: ${score}/${questions.length} (${percentage}%)\n\nGreat job learning emergency medicine! 🏥`);
            
            // Update XP and stats (simulated)
            const currentXP = parseInt(document.getElementById('gems').textContent);
            const earnedXP = score * 20;
            document.getElementById('gems').textContent = currentXP + earnedXP;
            
            closeQuiz();
        }

        // Simulate daily streak and heart updates
        setInterval(() => {
            const hearts = document.getElementById('hearts');
            const currentHearts = parseInt(hearts.textContent);
            if (currentHearts < 5) {
                hearts.textContent = Math.min(5, currentHearts + 1);
            }
        }, 30000); // Restore heart every 30 seconds for demo
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97f13a39a321d146',t:'MTc1Nzg2Njk5MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
